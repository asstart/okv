---

title: 02. Kimball Dimensional Modeling Techniques Overview
layout: default
parent: Data warehouse toolkit
grand_parent: Books log

---

> **?** - stands for "need to return to this later"

## Fundamental Concepts

> **Gather business requirements and data realities**
> Uncovering business requirements via sessions with business representatives and data realities via sessions with source system experts and data profiling

> **Collaborative dimension modelling workshops**
> Dimensional models should be design in collaboration with subject experts and data governance representatives from the business. A data model should unfold via series of workshop. This is another opportunity to better understand business requirements.

> **Four-step dimensional design process**
>
> *   Select the business process
> *   Declare the grain
> *   Identify the dimensions
> *   Identify the facts
>
> With answers on this question business team should be available  to determine table and column names, sample domain values, business rules.

> **Business processes**
> Operational activities performed by an organisation(e.g. taking orders, registring apointments etc.). Business process generate performance metrics that translate into facts.

> **Grain**
> Establish what a single row at fact tables represent

> **Dimensions for descriptive context**
> Dimension tables contain the descriptive attributes used by BI app for filitering and grouping the facts.

> **Facts for measurements**
> The result from a business process event

> **Star schemas**
> Dimensional structures deployed in a RDBMS

> **OLAP cubes**
> Dimensional structures implemented in a multidimensional database, often derrived from a relational star schema

> **Gracefully extensions to dimensional models**
> Dimensional models are resilent when data relationships changes. Changes from list below can be made without altering existing BI queries and without change any query results:
>
> *   Facts consisten with the grain of an existing fact table can be added by creating new columns
> *   Dimensions can be added to and existing fact tables by creating new FK
> *   Attributes can be added to an existing dimension table by creaing new columns

## Basic Fact Tables Techniques

> **Fact table structure**
> A fact table contains the numeric measures produced by an opertional measurement event in the real world. It entirely based on a physical activities and not influenced by the eventual reports. In addition to numberc measures, a fact table always contains FK for dimensions and date/time stamps.

> **Additivie, Semi-additive, Non-additive facts**

> **Null in Fact tables**
> Null-valued measurements behave ok, however null must be avoided in FK attributes of fact tables because these nulls would cause a referential integrity violation. Rather than a null FK, the associated dimensional table must have a default row represinting unknown or not applicable condition

> **Conformed facts**
> If same measurment appears in separate fact tables you need to make sure that techincal defenitions are identical if they are comptuted together. If the separate definitions are consistent, the confomed facts should be identical named.

> **Transaction fact tables**
> Fact tables in which row represents a single transaction from operational source.

> **Periodic snapshot fact tables**
> Summarize events occured over a certain period(e.g. day/week/month)

> **Accumulating snapshot fact tables**
> Summarize events occured between 2 point in time

> **Factless fact tables**
> Sometimes fact be represented not by a numeric attributes. It can be sign that something happened or didn't happen, like apointment took place, client click some button etc.

> **Aggregate fact tables**
> Numeric rollups of atomic fact table data to accelerate query performance

> **Consolidated fact tables**
> It might be convinient to combine facts from multiple processes together into a single consolidated table if the can be expressed at the same grain.

## Advanced Fact Table Techniques

> **Fact table surrogate key**
> Not associated with any dimension. Not required. But might be useful
>
> *   during ETL process to allow interrupted load process to either back out or resume
> *   to decompose update operation into: insert + delete operations
> *   as single column identifier

> **Centipede Fact Tables**
> This isn't a recommended pattern and should be avoided
> The appearance of this pattern is consequences of denormalizing dimension table. For instance, instead of having one calendar dimension, designer can split it into 3 separate dimensions: *month*, *quarter*, *year*. After this split, fact table must hold 3 FK for each of this dimensions instead one.

> **Numeric Values as Attributes or Facts**
> Sometimes it might not be clear is a numeric value fact or attribute(e.g. product's price)? In this case, it is important to understand how this value will be used:
>
> *   If for filtering or grouping - it's dimension. Also, this value can be supplemented with additional attribute(e.g. price range 0-$50, $51-100, etc.)
> *   If for calculation purposes - it's fact
>     Sometimes it might be useful to model this value as both.

> **Lag/Duration Facts**
> ?

> **Header/Line Fact Tables**
> Facts might conform to header/line (or parent/child) schema(e.g. transaction: it consists of lines - items of transaction and single header - transaction number). In this case, the header part of the fact should be included as *degenerate dimension* on the line-level fact.

> **Allocated Facts**
> In case header/line fact table, header facts should be propagated to the line-level facts. This can avoid creating a separate header-level fact table.

> **Profit and Loss Fact Tables Using Allocations**
> ?

> **Multiple Currency Facts**
> If a fact table holds information about financial transaction in multiple currencies, value for each additional currency should be saved in a separate column alongside with value in true currency. Also, dimension that identify true currency of transaction should be created.

> **Multiple Units of Measure Facts**
> Sometime business might require facts to be stated simultaneously in several units.  In case having a large number of facts in a single row and multiple units for each of them, the convenient technique might be to store each fact in some standard unit and store conversion factor for each other required unit.

> **Year-to-Date Facts**
>
> > *year-to-date means the total of something from the first day of the year through the current date*
>
> At first glance, the idea of calculating this metric during the ETL and store it in a fact table might be a good solution, but the definition of *year* could be changed, for instance to fiscal year. For this reason, it's better to calculate this in BI tool.

> **Multipass SQL to Avoid Fact-to-Fact Table Joins**
> A BI tool must never create an SQL that join two fact tables across some FKs.
> ?

> **Timespan Tracking in Fact Tables**
> ?

> **Late Arriving Facts**
> A fact row is late arriving if the most current dimensional context for new fact rows does not match the incoming row. In this case, the relevant dimensions must be searched to find the dimension keys that were effective when the late arriving measurement event occurred

## Basic Dimension Table Techniques

> **Dimensional table structure**
> Every table has a single PK. This tables are usually wide, flat denormalized tables. The most powerfull dimension attributes contains verbose textual description. Main target of attributes is filtering and grouping data.

> **Dimension surrogate key**
> Single column, PK that doesn't change over time is very important for dimensional table. So operational system natural key is bad candidate on this role. If we have multiple opertational source it's very  likely that we ended up with duplications or key just can be chnaged over time. So it's much better to have simple integer PK.

> **Natural, Dutable and Supernatural keys**
> Natural keys created by operational system are subject to business rule outside the control of the DW system. For instance, employee number may be changed if the employee resigns and then rehired. If we want to treat this employee as same person we need new durable key. This keys have a format that is independent of operational source and should be simple integer

> **Drilling down**
> Simply means adding new dimension attribute to the group by expression in a query.

> **Degenerate dimensions**
> Sometimes dimension has no content except its PK. In this case this attribute can be placed to a fact table with explicit aknowledgement that there's no associated dimension table

> **Denormalized flattened dimensions**

> **Multiple hierarchies in dimensions**
> Dimension can easily contains more then 1 hierarchy. For instance datetime or geographical dimensions

> **Flags and Indicators as a textual attributes**
> True/False flags or other similar indicators should be supplemented with full text words that have meaning when idependentluy viewed

> **Null attributes**
> It's better to use descriptive textual values like 'Unknow' or 'Not applicable' instead just NULL

> **Calendar date dimensions**

> **Role-playing dimensions** - ?

> **Junk dimensions**
> Transactions very likely will contains errors in their attributes. Instead of making demisions for them  single junk dimension can be created to combine them together.

> **Snowflake dimesions**
> Result of normalizing hierarchical relationships in dimensional tables.

> **Outrigger dimensions**
> If one dimension table reference to another, the secondary called *outrigger dimension*. It's permissible but in the most cases referencing should be done by fact tables.
